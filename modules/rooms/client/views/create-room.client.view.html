<section ng-controller="CreateRoomController as roomsManagement">
  <div class="modal-header">
    <h1>New Room</h1>
  </div>
  <div class="modal-body">
    <form name="roomsManagement.roomForm">
      <fieldset>
        <div class="form-group" show-errors>
          <label for="number">Number</label>
          <input name="number" type="number" ng-model="roomsManagement.room.number" id="number"
                 class="form-control" placeholder="Number" required autofocus>
          <div ng-messages="roomForm.number.$error" role="alert">
            <p class="help-block error-text" ng-message="required">Room number is required.</p>
          </div>
        </div>
        <div class="form-group" show-errors>
          <label for="number">Floor</label>
          <select name="floor" id="floor" class="form-control"
                  ng-model="roomsManagement.room.floor"
                  ng-options="floor.label for floor in roomsManagement.floors track by floor._id">
            <option value="" label="Please select a floor" ng-hide="roomsManagement.roomForm.floor.$dirty"></option>
          </select>
        </div>
        <div class="row">
          <div class="col-md-6" ng-repeat="feature in roomsManagement.availableFeatures">
            <div show-errors class="form-group">
              <label ng-attr-for="feature-{{ feature.name }}" ng-bind="feature.name + ':'"></label>
              <input type="text" name="feature-{{ feature.name }}" id="feature-{{ feature.name }}"
                     ng-init="roomsManagement.room.features[feature.name].type = feature"
                     class="form-control" ng-model="roomsManagement.room.features[feature.name].value">
            </div>
          </div>
        </div>
        <div class="form-group text-center" ng-show="roomsManagement.room.imageURL">
          <img ng-src="{{ roomsManagement.room.imageURL }}" ng-attr-alt="Room #{{ roomsManagement.room.number }}"
               class="img-thumbnail room-image-thumb">
        </div>
        <div class="text-center form-group">
          <span class="btn btn-default btn-file">
              Select Image <input type="file" nv-file-select uploader="roomsManagement.fileUploader">
          </span>
        </div>
        <div ng-show="roomsManagement.error" class="text-danger">
          <strong ng-bind="roomsManagement.error"></strong>
        </div>
      </fieldset>
    </form>
  </div>
  <div class="modal-footer">
    <div class="form-group">
      <button type="button" class="btn btn-success" ng-click="roomsManagement.create()"
              ng-disabled="roomForm.$invalid">Create</button>
      <button type="button" class="btn btn-danger" ng-click="roomsManagement.dismiss()">Cancel</button>
    </div>
  </div>
</section>
